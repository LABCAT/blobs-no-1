{"version":3,"sources":["js/helpers/Globals.js","js/functions/ColourCalculators.js","js/functions/PlayIcon.js","audio/blobs-no-1.ogg","audio/blobs-no-1.mid","js/P5SketchWithAudio.js","js/App.js","index.js"],"names":["window","p5","TriadicColourCalculator","hue","saturation","brightness","set","i","colour","color","push","PlayIcon","id","className","xmlns","height","viewBox","width","d","fill","P5SketchWithAudio","sketchRef","useRef","Sketch","p","canvas","canvasWidth","innerWidth","canvasHeight","innerHeight","audioLoaded","player","PPQ","loadMidi","Midi","fromUrl","midi","then","result","noteSet1","tracks","notes","scheduleCueSet","document","getElementById","classList","add","remove","preload","song","loadSound","audio","onended","logCredits","noteSet","callbackName","poly","lastTicks","currentCue","length","note","ticks","time","addCue","setup","createCanvas","background","colorMode","HSB","strokeWeight","noLoop","draw","isPlaying","drawBlob","x","y","size","growth","edges","seed","path","blobshape","pathArray","parseSVGPath","translate","_getHue","stroke","beginShape","cmd","command","params","slice","vertex","quadraticVertex","endShape","CLOSE","pathData","commands","match","charAt","split","map","Number","sizes","blobsArray","executeCueSet1","duration","divisor","random","offsetPos","parseInt","colourSet","shuffle","delay","blob","setTimeout","hasStarted","mousePressed","pause","currentTime","buffer","reset","dataLayer","title","location","href","addClass","play","creditsLogged","console","log","stop","updateCanvasDimensions","resizeCanvas","attachEvent","addEventListener","useEffect","current","ref","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.370d1676.chunk.js","sourcesContent":["// p5.sound doesn't work correctly when p5 is not available in the global name space so we add it here\n// https://github.com/processing/p5.js-sound/issues/512\nimport * as p5 from \"p5\";\nwindow.p5 = p5;\n","function TetradicColourCalculator(p5, hue, saturation = 100, brightness = 100) {\n    let set = [];\n    let i = 0;\n    while(i < 4){\n        hue = hue + i * 90;\n        hue = hue < 360 ? hue : hue - 360;\n        const colour = p5.color(\n          hue,\n          saturation,\n          brightness,\n          1\n        );\n        set.push(colour);\n        i++;\n    }\n\n\n  return set;\n}\n\nfunction TriadicColourCalculator(p5, hue, saturation = 100, brightness = 100) {\n    let set = [];\n    let i = 0;\n    while(i < 3){\n        const colour = p5.color(\n          hue,\n          saturation,\n          brightness,\n          1\n        );\n        set.push(colour);\n        hue = hue + 120 < 360 ? hue + 120 : hue - 240;\n        i++;\n    }\n\n\n  return set;\n}\n\nfunction ComplementaryColourCalculator(p5, hue, saturation = 100, brightness = 100) {\n    let set = [];\n    let i = 0;\n    while(i < 2){\n        hue = hue + i * 180;\n        hue = hue < 360 ? hue : hue - 360;\n        const colour = p5.color(\n          hue,\n          saturation,\n          brightness,\n          1\n        );\n        set.push(colour);\n        i++;\n    }\n\n\n  return set;\n}\n\nexport { TetradicColourCalculator, TriadicColourCalculator, ComplementaryColourCalculator };","export default function PlayIcon() {\n    return (\n        <svg id=\"play-icon\" className='fade-out' xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n            <path d=\"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n        </svg>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/blobs-no-1.069f1966.ogg\";","export default __webpack_public_path__ + \"static/media/blobs-no-1.7cf46b9f.mid\";","import React, { useRef, useEffect } from \"react\";\nimport \"./helpers/Globals\";\nimport \"p5/lib/addons/p5.sound\";\nimport * as p5 from \"p5\";\nimport { Midi } from '@tonejs/midi'\nimport blobshape from \"blobshape\";\nimport { TriadicColourCalculator } from './functions/ColourCalculators';\nimport PlayIcon from './functions/PlayIcon.js';\n\nimport audio from \"../audio/blobs-no-1.ogg\";\nimport midi from \"../audio/blobs-no-1.mid\";\n\n/**\n * Inspiration:\n * \n * https://github.com/lokesh-coder/blobshape/\n * https://github.com/nghiepdev/react-svg-blob/tree/main\n * https://codepen.io/Dillo/pen/KKrjKpa?editors=0010\n * https://dev.to/georgedoescode/a-generative-svg-starter-kit-5cm1\n * \n */\nconst P5SketchWithAudio = () => {\n    const sketchRef = useRef();\n\n    const Sketch = p => {\n\n        p.canvas = null;\n\n        p.canvasWidth = window.innerWidth;\n\n        p.canvasHeight = window.innerHeight;\n\n        p.audioLoaded = false;\n\n        p.player = null;\n\n        p.PPQ = 3840 * 4;\n\n        p.loadMidi = () => {\n            Midi.fromUrl(midi).then(\n                function(result) {\n                    const noteSet1 = result.tracks[2].notes; // Synth 1 - Init Patch\n                    p.scheduleCueSet(noteSet1, 'executeCueSet1');\n                    p.audioLoaded = true;\n                    document.getElementById(\"loader\").classList.add(\"loading--complete\");\n                    document.getElementById(\"play-icon\").classList.remove(\"fade-out\");\n                }\n            );\n            \n        }\n\n        p.preload = () => {\n            p.song = p.loadSound(audio, p.loadMidi);\n            p.song.onended(p.logCredits);\n        }\n\n        p.scheduleCueSet = (noteSet, callbackName, poly = false)  => {\n            let lastTicks = -1,\n                currentCue = 1;\n            for (let i = 0; i < noteSet.length; i++) {\n                const note = noteSet[i],\n                    { ticks, time } = note;\n                if(ticks !== lastTicks || poly){\n                    note.currentCue = currentCue;\n                    p.song.addCue(time, p[callbackName], note);\n                    lastTicks = ticks;\n                    currentCue++;\n                }\n            }\n        } \n\n        p.setup = () => {\n            p.canvas = p.createCanvas(p.canvasWidth, p.canvasHeight);\n            p.background(0);\n            p.colorMode(p.HSB);\n            p.strokeWeight(2);\n            p.noLoop();\n        }\n\n        p.draw = () => {\n            if(p.audioLoaded && p.song.isPlaying()){\n\n            }\n        }\n\n        p.drawBlob = (x, y, size, growth, edges, color, seed) => {\n            const { path } = blobshape({ size: size, growth: growth, edges: edges, seed: seed });\n            const pathArray = p.parseSVGPath(path);\n            p.translate(x - (size / 2), y - (size / 2));\n            p.fill(\n                color._getHue(),\n                100,\n                100,\n                0.5\n            );\n            p.stroke(\n                color._getHue(),\n                100,\n                100,\n                1\n            );\n            p.beginShape();\n            for (let cmd of pathArray) {\n                let command = cmd[0];\n                let params = cmd.slice(1);\n                \n                if (command === 'M') {\n                    p.vertex(params[0], params[1]);\n                } else if (command === 'Q') {\n                    p.quadraticVertex(params[0], params[1], params[2], params[3]);\n                }\n            }\n            p.endShape(p.CLOSE);\n            p.translate(-x + (size / 2), -y + (size / 2));\n        }\n\n        p.parseSVGPath = (pathData) => {\n            let commands = pathData.match(/[a-df-z][^a-df-z]*/gi);\n            let pathArray = [];\n            \n            for (let cmd of commands) {\n                let command = cmd.charAt(0);\n                let params = cmd.slice(1).split(/[\\s,]+/).map(Number);\n                pathArray.push([command, ...params]);\n            }\n            \n            return pathArray;\n        }\n\n        p.sizes = [8, 12, 16, 24, 32, 48, 64];\n\n        p.blobsArray = [];\n\n        p.executeCueSet1 = (note) => {\n            const { duration } = note;\n            p.blobsArray = [];\n            p.background(0);\n\n            const divisor = p.random(p.sizes);\n            let offsetPos = false;\n            for (let x = 0; x <= p.width; x = x + (p.width / divisor)) {\n                for (let y = 0; y <= (p.height + (p.width / divisor)); y = y + (p.width / divisor)) {\n                    const hue = p.random(0, 360);\n                    p.blobsArray.push({\n                        x: x,\n                        y: offsetPos ? y + ((p.width / divisor) / 2) : y,\n                        growth: parseInt(p.random(3, 9)),\n                        edges: parseInt(p.random(4, 16)),\n                        colourSet: TriadicColourCalculator(p, hue),\n                        divisor: divisor,\n                        seed: p.random(1, 10)\n                    });\n                    \n                    \n                }  \n                offsetPos = !offsetPos;\n            }\n\n            p.blobsArray = p.shuffle(p.blobsArray);\n            const delay = (duration * 1000 / p.blobsArray.length);\n            for (let i = 0; i < p.blobsArray.length; i++) {\n                const blob = p.blobsArray[i];\n                const { x, y, growth, edges, colourSet, seed } = blob;\n\n                setTimeout(\n                    function () {\n                        p.drawBlob(x, y, (p.width / (divisor * 0.9)), growth, edges, colourSet[0], seed);\n                        p.drawBlob(x, y, (p.width / (divisor * 1.2)), growth, edges, colourSet[1], seed);\n                        p.drawBlob(x, y, (p.width / (divisor * 1.5)), growth, edges, colourSet[2], seed);\n                    },\n                    (delay * i)\n                );\n            }\n        }\n\n        p.hasStarted = false;\n\n        p.mousePressed = () => {\n            if(p.audioLoaded){\n                if (p.song.isPlaying()) {\n                    p.song.pause();\n                } else {\n                    if (parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)) {\n                        p.reset();\n                        if (typeof window.dataLayer !== typeof undefined){\n                            window.dataLayer.push(\n                                { \n                                    'event': 'play-animation',\n                                    'animation': {\n                                        'title': document.title,\n                                        'location': window.location.href,\n                                        'action': 'replaying'\n                                    }\n                                }\n                            );\n                        }\n                    }\n                    document.getElementById(\"play-icon\").classList.add(\"fade-out\");\n                    p.canvas.addClass(\"fade-in\");\n                    p.song.play();\n                    if (typeof window.dataLayer !== typeof undefined && !p.hasStarted){\n                        window.dataLayer.push(\n                            { \n                                'event': 'play-animation',\n                                'animation': {\n                                    'title': document.title,\n                                    'location': window.location.href,\n                                    'action': 'start playing'\n                                }\n                            }\n                        );\n                        p.hasStarted = false\n                    }\n                }\n            }\n        }\n\n        p.creditsLogged = false;\n\n        p.logCredits = () => {\n            if (\n                !p.creditsLogged &&\n                parseInt(p.song.currentTime()) >= parseInt(p.song.buffer.duration)\n            ) {\n                p.creditsLogged = true;\n                    console.log(\n                    \"Music By: http://labcat.nz/\",\n                    \"\\n\",\n                    \"Animation By: https://github.com/LABCAT/\"\n                );\n                p.song.stop();\n            }\n        };\n\n        p.reset = () => {\n\n        }\n\n        p.updateCanvasDimensions = () => {\n            p.canvasWidth = window.innerWidth;\n            p.canvasHeight = window.innerHeight;\n            p.canvas = p.resizeCanvas(p.canvasWidth, p.canvasHeight);\n        }\n\n        if (window.attachEvent) {\n            window.attachEvent(\n                'onresize',\n                function () {\n                    p.updateCanvasDimensions();\n                }\n            );\n        }\n        else if (window.addEventListener) {\n            window.addEventListener(\n                'resize',\n                function () {\n                    p.updateCanvasDimensions();\n                },\n                true\n            );\n        }\n        else {\n            //The browser does not support Javascript event binding\n        }\n    };\n\n    useEffect(() => {\n        new p5(Sketch, sketchRef.current);\n    }, []);\n\n    return (\n        <div ref={sketchRef}>\n            <PlayIcon />\n        </div>\n    );\n};\n\nexport default P5SketchWithAudio;\n","import P5SketchWithAudio from './P5SketchWithAudio'\n\nfunction App() {\n  return (\n    <P5SketchWithAudio/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/build.css';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}